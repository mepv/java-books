<div class="book-container">
  <div class="content">
    <h1>Librer√≠a Java Books</h1>
    <p>Explora nuestra colecci√≥n de literatura general.</p>

    <div class="search-container">
      <div class="search-controls">
        <select [(ngModel)]="searchBy" class="search-select">
          <option value="title">Buscar por T√≠tulo</option>
          <option value="author">Buscar por Autor</option>
        </select>

        <div class="search-input-group">
          <input
            type="text"
            [(ngModel)]="searchTerm"
            placeholder="Ingresa tu b√∫squeda"
            class="search-input"
          >
          <button (click)="searchBooks()" class="search-button">Buscar</button>
        </div>
      </div>

      <div class="filters">
        <div class="filter-group" *ngIf="categories.length > 0">
          <h3>Categor√≠as</h3>
          <div class="tags">
            <span class="tag" *ngFor="let category of categories">
              {{ category }}
            </span>
          </div>
        </div>

        <div class="filter-group" *ngIf="authors.length > 0">
          <h3>Autores</h3>
          <div class="tags">
            <span class="tag" *ngFor="let author of authors">
              {{ author }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <div class="book-list" *ngIf="books.length > 0 && !selectedBook && !singleBookResult">
      <div class="book-card" *ngFor="let book of books" (click)="selectBook(book)">
        <div class="icon">üìò</div>
        <h3>{{ book.title }}</h3>
        <p class="author">por {{ book.author }}</p>
        <p class="description">{{ book.content | slice:0:100 }}...</p>
        <div class="book-meta">
          <span class="price">{{ book.amountPages }} p√°ginas</span>
          <span class="category">{{ book.category }}</span>
        </div>
      </div>
    </div>

    <div *ngIf="books.length === 0 && !singleBookResult && searched" class="no-results">
      <div class="icon">üîç</div>
      <h3>No se encontraron libros</h3>
      <p *ngIf="searchBy === 'author'">No tienes permisos para ver libros de este autor o no existen en nuestro cat√°logo.</p>
      <p *ngIf="searchBy !== 'author'">Intenta con otra b√∫squeda o categor√≠a.</p>
    </div>

    <div class="book-details" *ngIf="selectedBook">
      <button class="back-button" (click)="closeDetails()">‚Üê Volver</button>

      <div class="detail-content">
        <h2>{{ selectedBook.title }}</h2>
        <p class="author">por {{ selectedBook.author }}</p>
        <div class="detail-meta">
          <span class="category">{{ selectedBook.category }}</span>
          <span class="pages">{{ selectedBook.amountPages }} p√°ginas</span>
        </div>

        <div class="detail-section">
          <h3>Descripci√≥n</h3>
          <p>{{ selectedBook.content }}</p>
        </div>

        <div class="actions">
          <button *ngIf="isAdmin" class="delete-button" (click)="deleteBook(selectedBook.id)">Eliminar</button>
        </div>
      </div>
    </div>

    <button class="logout-button" (click)="logout()">Cerrar sesi√≥n</button>
  </div>
</div>
